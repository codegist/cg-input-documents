<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../cg-datasource/cg-datasource-base-behavior.html">
<link rel="import" href="../cg-base/cg-base-behavior.html">

<dom-module id="cg-datasource-testdata">
</dom-module>
<script>
    var db = {
        categories: ["Bill", "Bitewing view", "Cephalometric projections", "Cone Beam CT", "Dental computed tomography (CT)", "Digital imaging", "Extraoral x-rays", "Full mouth series", "Intraoral x-rays", "MRI imaging", "Occlusal view", "Orthopantomogram", "Panoramic films", "Panoramic x-rays", "Periapical view", "Radiography", "Tomograms", "X-ray"],
        documents: [{
            "name": "stock-vector-natural-grass-and-ground-seamless-borders-set-of-vector-cartoon-illustrations-of-grass-field-71024461.jpg",
            "size": 160872482,
            "type": "application/word",
            "description": "Sed id lacus vitae tortor convallis rhoncus a non ipsum.",
            "updatedAt": new Date("2012-09-28T20:37:22.931Z"),
            "createdAt": new Date("2012-02-21T22:16:06.236Z"),
            "added": new Date("2005-07-28T15:26:00.000Z"),
            "categories": ["Panoramic x-rays", "Tomograms", "X-ray", "Panoramic films"]
        }, {
            "name": "singlepath.svg",
            "size": 160242552,
            "type": "image/jpeg",
            "description": "Sed tempus magna et ligula imperdiet gravida.",
            "updatedAt": new Date("2013-10-24T23:53:03.173Z"),
            "createdAt": new Date("2012-02-22T00:03:24.490Z"),
            "added": new Date("2001-11-06T18:47:00.000Z"),
            "categories": ["Periapical view"]
        }, {
            "name": "eclipse-java-luna-SR1-linux-gtk-x86_64.tar.gz",
            "size": 63,
            "type": "plain/text",
            "description": "Sed tempus magna et ligula imperdiet gravida.",
            "updatedAt": new Date("2012-10-25T09:50:31.111Z"),
            "createdAt": new Date("2012-02-22T00:51:01.898Z"),
            "added": new Date("2011-11-03T21:37:00.000Z"),
            "categories": ["Bitewing view", "Periapical view", "Extraoral x-rays", "Cephalometric projections", "X-ray", "Full mouth series", "Radiography", "Panoramic x-rays"]
        }, {
            "name": "eclipse-java-luna-SR1-linux-gtk-x86_64.tar.gz",
            "size": 359551,
            "type": "application/zip",
            "description": "Sed id lacus vitae tortor convallis rhoncus a non ipsum.",
            "updatedAt": new Date("2012-03-29T02:49:32.418Z"),
            "createdAt": new Date("2012-02-19T10:51:00.366Z"),
            "added": new Date("2012-11-11T11:46:00.000Z"),
            "categories": [],
            "link": {"id": "5567eacee22163d20fb63c53", "type": "event", "display": "event"}
        }, {
            "name": "salamander",
            "size": 359551,
            "type": "application/excel",
            "description": "Sed tempus magna et ligula imperdiet gravida.",
            "updatedAt": new Date("2012-12-31T00:26:04.088Z"),
            "createdAt": new Date("2012-04-11T12:39:26.150Z"),
            "added": new Date("2013-04-12T19:32:00.000Z"),
            "categories": [],
            "link": {"id": "5567eacee22163d20fb63d14", "type": "event", "display": "event"}
        }, {
            "name": "eclipse-java-luna-SR1-linux-gtk-x86_64.tar.gz",
            "size": 71119,
            "type": "image/jpeg",
            "description": "Sed id lacus vitae tortor convallis rhoncus a non ipsum.",
            "updatedAt": new Date("2012-08-22T22:46:55.777Z"),
            "createdAt": new Date("2012-05-07T09:54:18.287Z"),
            "added": new Date("2007-11-30T10:09:00.000Z"),
            "categories": ["MRI imaging", "Bitewing view", "Dental computed tomography (CT)", "Digital imaging", "Full mouth series"],
            "link": {"id": "5567eacee22163d20fb63d80", "type": "event", "display": "event"}
        }]
    };

    Polymer({
        is: 'cg-datasource-testdata',
        properties: {
            providersMap: {
                type: Function,
                value: function () {
                    return {
                        'documents/data': this.documents,
                        'document/save': this.save,
                        'document/delete': this.delete,
                        'documents/categories/data': this.categories
                    };
                }
            }
        },
        behaviors: [CG.DataSourceBaseBehavior],
        ready: function () {
            this.globals.dataAware = true;
        },
        documents: function (options) {
            console.log("### Datasource[TestData] documents(params:" + JSON.stringify(options.params) + ")");
            return options.success({
                "success": true,
                "status": 200,
                "data":db.documents
            });
        },
        categories: function (options) {
            console.log("### Datasource[TestData] categories(params:" + JSON.stringify(options.params) + ")");
            return options.success({
                "success": true,
                "status": 200,
                "data":db.categories
            });
        },
        save: function (options) {
            console.log("### Datasource[TestData] save(params:" + JSON.stringify(options.params) + ")");
            delete options.params.document.handle;
            delete options.params.document._dirty;
            return options.success({
                "success": true,
                "status": 200,
                "data":options.params.document
            });
        },
        "delete": function (options) {
            console.log("### Datasource[TestData] delete(params:" + JSON.stringify(options.params) + ")");
            return options.success({
                "success": true,
                "status": 200,
                "data":options.params.document
            });
        }
    });
</script>

